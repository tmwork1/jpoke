# ハンドラ実装チェックリスト

このディレクトリには、jpoke プロジェクトで実装されたイベントハンドラの実装状況を追跡するチェックリストが保存されています。

## ファイル一覧

各ファイルは特定のハンドラカテゴリーの実装状況を表示します：

- [ability.md](ability.md) - 特性（Ability）ハンドラ（14件）
- [item.md](item.md) - 道具（Item）ハンドラ（22件）
- [move.md](move.md) - 技（Move）ハンドラ（8件）
- [ailment.md](ailment.md) - 状態異常（Ailment）ハンドラ（7件）
- [volatile.md](volatile.md) - 揮発状態（Volatile）ハンドラ（69件）
- [field.md](field.md) - 場の状態（Field）ハンドラ（32件）
  - 天候（Weather）ハンドラ
  - 地形（Terrain）ハンドラ
  - グローバルフィールドハンドラ
  - サイドフィールドハンドラ

## チェックリストの形式

各ファイルは以下の形式のテーブルで実装状況を管理します：

| 名前 | 効果 | イベント | ハンドラ名 | 実装 | テスト | ユーザー確認 | 備考 |

### ステータス凡例

- ✅ 実装済み
- ⚠️ 部分的に実装（TODO記載あり）
- ❌ 未実装

### カウント方法の注記

**本ディレクトリのチェックリストはハンドラ単位で進捗を追跡しています：**

- **ハンドラ関数単位** で計数（row-by-row）
- 複数の効果を持つ要素は複数行で記載
  - 例：「はれ」は「炎技1.5倍」と「かみなり・ぼうふう命中補正」で2行
- ハンドラの粒度で実装進捗を管理

**トップのREADME.md では異なるカウント方法を使用：**

- README では **要素単位** でカウント（要素として実装が完全に完了したものを1とカウント）
- 例：「はれ」は1つのフィールド効果要素として1カウント（ハンドラ数は関係ない）
- より高レベルの実装状況を示す

## 実装統計（2026年2月7日時点）

- **合計ハンドラ**: 150件以上
- **実装済み**: 約120件（80%以上）
- **テスト実装**: 大多数は成功
- **全体進捗**: ハンドラロジックの実装は約85%完了

### 最近の改善（2026年2月7日）

#### コード品質改善
- ✅ handler/ability.py に包括的な docstring を追加（14関数）
- ✅ type hint を改善（Any → 具体型）
- ✅ volatile.py を五十音順に再編成（69関数）
- ✅ data/handlers モジュールに五十音順の説明をdocstringに追記

#### アーキテクチャ改善
- ✅ sub_hp と critical_rank を Volatile クラスへ移行
- ✅ Pokemon クラスから古い属性を削除
- ✅ テスト互換性を確保（property accessors）

## 更新方法

新しいハンドラを追加した場合や、実装状況が変わった場合は、対応するマークダウンファイルを更新してください。
